{% extends "base_site.html" %}
{% load markdown %}
{% load static %}

{% block title %}{{ task.title }}{% endblock %}
{% block extrahead %}
<link rel="stylesheet" type="text/css" href="{% static 'css/syntax.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/editor-v2.css' %}">
{% endblock %}
{% block body_classes %}editor-v2{% endblock %}
{% block navbar_container_classes %}container-fluid{% endblock  %}
{% block container_classes %}container-fluid{% endblock %}

{% block content %}
<header class="toolbar">
  <div>
    <h1>{{ task.title }}</h1>
    <span id="task-countdown">00:14:23</span>
  </div>

  <div>
    <div class="btn-group btn-group-sm" role="group">
      <button id="toolbar-switch-btn--editor" type="button" class="btn btn-default" disabled="disabled">Editor</button>
      <button id="toolbar-switch-btn--manual" type="button" class="btn btn-default">Manual upload</button>
    </div>
    <div>
      <button id="toolbar-btn--save" type="button" class="btn btn-success btn-sm" onclick="communicator.save();">
        <span class="glyphicon glyphicon-floppy-saved" aria-hidden="true"></span> Save all
      </button>
      <button id="toolbar-btn--save" type="button" class="btn btn-primary btn-sm" onclick="tabBar.createNewEmptyTab();">
        <span class="glyphicon glyphicon-file" aria-hidden="true"></span> Create file
      </button>
      <button id="toolbar-btn--submit" type="button" class="btn btn-default btn-sm">
        <span class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span> Submit
      </button>
      <button id="toolbar-btn--syntax" type="button" class="btn btn-default btn-sm">
        <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Check syntax
      </button>
    </div>
  </div>
</header>

<main>
  <div>
    {{ task.description|markdown }}
  </div>
  <div>
    <div id="editor">
      <div id="editor-tabbar">
        <ul id="editor-tabbar-files"></ul>
        <div>
          <button id="editor-tabbar-btn--rename" onclick="tabBar.edit(tabBar.activeTab.tabId)" type="button" class="btn btn-link btn-xs">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Rename
          </button>
          <button id="editor-tabbar-btn--delete" onclick="tabBar.destroyActiveTab(tabBar.activeTab.tabId)" type="button" class="btn btn-link btn-xs">
            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete
          </button>
        </div>
      </div>
      <div id="editor-content">
      </div>
    </div>
    <div id="console">
      <div>
        <h3>Syntax check result</h3>
        <button id="console-btn--hide" type="button" class="btn btn-link btn-xs">
            <span class="glyphicon glyphicon-close" aria-hidden="true"></span> Hide
        </button>
      </div>
      <div id="console-content">
      </div>
    </div>
  </div>
</main>
{% endblock  %}

{% block footer %}{% endblock %}

{% block extrabody %}
<div id="modals"></div>
<script src="{% static 'vendor/js/prism.js' %}"></script>
<script src="{% static 'vendor/js/prism-java.min.js' %}"></script>
<script src="{% static 'vendor/js/anchor.min.js' %}"></script>
<script src="{% static 'js/inloop.js' %}"></script>
<script src="{% static 'vendor/js/ace-1.4.12/ace.js' %}"></script>
<script src="{% static 'vendor/js/ace-1.4.12/ext-language_tools.js' %}"></script>
<script src="{% static 'vendor/js/ace-1.4.12/mode-java.js' %}"></script>
<script src="{% static 'vendor/js/jquery.min.js' %}"></script>
<script src="{% static 'vendor/js/rusha.min.js' %}"></script>
<script src="{% static 'vendor/js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/ace-theme-inloop.js' %}"></script>
<script id="editor-script" src="{% static 'js/editor-v2.js' %}"
        data-csrf-token="{{ csrf_token }}"
        data-modular-tab-url="{% url 'solutions:modular-tab' task.slug %}"
        data-modal-notification-url="{% url 'solutions:modal-notification' task.slug %}"
        data-modal-input-form-url="{% url 'solutions:modal-input-form' task.slug %}"
        data-modal-confirmation-form-url="{% url 'solutions:modal-confirmation-form' task.slug %}"
        data-solutions-editor-url="{% url 'solutions:editor' task.slug %}"
        data-solutions-list-url="{% url 'solutions:list' task.slug %}"
        data-get-last-checkpoint-url="{% url 'solutions:get-last-checkpoint' task.slug %}"
        data-save-checkpoint-url="{% url 'solutions:save-checkpoint' task.slug %}">
</script>
{% endblock %}


