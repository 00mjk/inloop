{% extends 'base_site.html' %}

{% block title %}Homepage{% endblock %}

{% block extrahead %}
  <style>
    .progress {
      float: right;
      width: 70%;
      margin-bottom: 0px;
    }
  </style>
{% endblock %}

{% block content %}

<ol class="breadcrumb">
  <li class="active">Tasks</li>
</ol>

{% if categories %}
  <table class="table table-align-pretty">
    <thead>
    <tr>
      <th>Title</th>
      <th>Progress</th>
      <th>Completed</th>
    </tr>
    </thead>

    <tbody>
    {% for cat, data in categories %}
    <tr>
      <td><a href="{% url 'tasks:category' cat.slug %}">{{ cat.name }}</a></td>
      <td>
        {{ data.num_completed }} / {{ data.num_published }}
        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="{{ data.num_completed }}"
              aria-valuemin="0" aria-valuemax="{{ data.num_published }}" style="width: {{ data.progress }}%;">
          </div><!--/.progress-bar-->
        </div><!--/.progress-->
      </td>
      <td>
      {% if data.num_completed == data.num_published %}
        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
        <span class="sr-only">Yes</span>
      {% else %}
        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
        <span class="sr-only">No</span>
      {% endif %}
      </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
{% else %}
  <div class="alert alert-info">There are currently no tasks in the system.</div>
{% endif %}


{% endblock %}
